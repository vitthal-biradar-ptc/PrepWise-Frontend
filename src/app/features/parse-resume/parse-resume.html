<section
  class="parse-resume-section pt-24 md:pt-28 lg:pt-32 pb-8 md:pb-12 lg:pb-20 min-h-screen relative overflow-hidden bg-[#0A0A0A]"
>
  <app-header></app-header>
  <!-- Background decorations -->
  <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0">
    <div
      class="absolute top-1/4 -left-40 w-72 md:w-96 h-72 md:h-96 bg-[#7F00FF]/20 rounded-full blur-[80px] md:blur-[100px]"
    ></div>
    <div
      class="absolute bottom-1/3 -right-40 w-72 md:w-96 h-72 md:h-96 bg-[#C400FF]/20 rounded-full blur-[80px] md:blur-[100px]"
    ></div>
    <div
      class="absolute -bottom-20 left-1/4 w-48 md:w-64 h-48 md:h-64 bg-[#B03EFF]/10 rounded-full blur-[60px] md:blur-[80px]"
    ></div>
  </div>

  <div class="container mx-auto px-4 sm:px-6 relative z-10">
    <div class="parse-header text-center mb-6 md:mb-10">
      <h1
        class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold mb-3 md:mb-6 text-white"
      >
        <span
          class="bg-clip-text text-transparent bg-gradient-to-r from-[#7F00FF] to-[#C400FF]"
          >Smart Resume</span
        >
        <span class="text-white"> Parser</span>
      </h1>
      <p
        class="text-base sm:text-lg md:text-xl text-[#A7A7A7] max-w-2xl mx-auto"
      >
        {{
          isFirstTime
            ? "Let's get started! Upload your resume to automatically fill your profile"
            : "Upload a new resume to update your profile information"
        }}
      </p>
    </div>

    <div class="parse-content max-w-4xl mx-auto">
      <!-- Upload Section -->
      <div class="upload-section relative mb-8">
        <div
          class="absolute -inset-0.5 bg-gradient-to-br from-[#7F00FF]/20 to-[#C400FF]/20 rounded-xl blur-lg opacity-70"
        ></div>
        <div
          class="relative bg-[#1A1A1A] rounded-xl p-4 sm:p-6 md:p-8 border border-[#B03EFF]/30"
          style="backdrop-filter: blur(20px)"
        >
          <!-- File Upload Area -->
          <div
            class="file-drop-zone border-2 border-dashed border-[#B03EFF]/30 rounded-lg p-4 sm:p-6 md:p-8 text-center transition-all hover:border-[#B03EFF]/60 hover:bg-[#B03EFF]/5 flex items-center justify-center min-h-[300px]"
            [class.has-file]="selectedFile"
            [class.drag-active]="isDragging"
            (dragover)="onDragOver($event)"
            (dragleave)="onDragLeave($event)"
            (drop)="onDrop($event)"
          >
            @if (!selectedFile) {
            <div
              class="drop-zone-content flex flex-col items-center justify-center h-full w-full"
            >
              <div
                class="upload-icon text-4xl sm:text-5xl md:text-6xl mb-2 md:mb-4 text-[#B03EFF]"
              >
                üìÑ
              </div>
              <p
                class="drop-text text-base sm:text-lg md:text-xl text-[#F1F1F1] mb-1 md:mb-2"
              >
                Drag and drop your PDF resume here
              </p>
              <p class="or-text text-[#A7A7A7] mb-2 md:mb-4">or</p>
              <label
                for="file-input"
                class="file-input-label bg-gradient-to-r from-[#7F00FF] to-[#C400FF] text-[#F1F1F1] px-4 sm:px-5 md:px-6 py-2 md:py-3 rounded-lg font-medium cursor-pointer hover:shadow-lg transition-all text-sm sm:text-base"
              >
                Choose File
                <input
                  id="file-input"
                  type="file"
                  accept=".pdf"
                  (change)="onFileSelected($event)"
                  style="display: none"
                />
              </label>
              <p
                class="file-info text-[#A7A7A7] text-xs sm:text-sm mt-2 md:mt-3"
              >
                Only PDF files are supported
              </p>
            </div>
            } @else {
            <div
              class="selected-file flex items-center bg-[#B03EFF]/10 p-3 md:p-4 rounded-lg border border-[#B03EFF]/20 w-full max-w-md"
            >
              <div
                class="file-icon text-2xl md:text-3xl mr-3 md:mr-4 text-[#B03EFF]"
              >
                üìÑ
              </div>
              <div class="file-details flex-1">
                <p
                  class="file-name text-[#F1F1F1] font-medium text-sm sm:text-base"
                >
                  {{ selectedFile.name }}
                </p>
                <p class="file-size text-[#A7A7A7] text-xs sm:text-sm">
                  {{ (selectedFile.size / 1024 / 1024).toFixed(2) }} MB
                </p>
              </div>
              <button
                class="remove-file-btn bg-red-500 text-white w-7 h-7 sm:w-8 sm:h-8 rounded-full hover:bg-red-600 transition-colors"
                (click)="selectedFile = null"
              >
                ‚úï
              </button>
            </div>
            }
          </div>

          <!-- Error Display -->
          @if (error) {
          <div
            class="error-message bg-red-500/10 border border-red-500/30 text-red-400 p-2 sm:p-3 rounded-lg mt-3 md:mt-4 text-sm sm:text-base"
          >
            {{ error }}
          </div>
          }

          <!-- Action Buttons -->
          <div
            class="action-buttons flex flex-col sm:flex-row gap-2 sm:gap-4 mt-4 md:mt-6"
          >
            <button
              class="parse-btn flex-1 bg-gradient-to-r from-[#7F00FF] to-[#C400FF] text-[#F1F1F1] py-2 sm:py-3 px-4 sm:px-6 rounded-lg font-medium transition-all hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base"
              (click)="parseResume()"
              [disabled]="isLoading || !selectedFile"
            >
              @if(!isLoading){ <span>Parse Resume</span>} @if(isLoading){
              <span>Parsing...</span> }
            </button>
            <button
              class="clear-btn bg-[#1A1A1A] border border-[#B03EFF]/30 text-[#F1F1F1] py-2 sm:py-3 px-4 sm:px-6 rounded-lg font-medium hover:border-[#B03EFF]/60 transition-all text-sm sm:text-base"
              (click)="clearAll()"
            >
              Clear
            </button>
            @if (isFirstTime) {
            <button
              class="skip-btn bg-[#2A2A2A] border border-[#A7A7A7]/30 text-[#A7A7A7] py-2 sm:py-3 px-4 sm:px-6 rounded-lg font-medium hover:border-[#A7A7A7]/60 hover:text-[#F1F1F1] transition-all text-sm sm:text-base"
              (click)="skipForNow()"
            >
              Skip for Now
            </button>
            }
          </div>
        </div>
      </div>

      <!-- Loading State -->
      @if (isLoading) {
      <div class="loading-section text-center py-12">
        <div class="loading-icon text-5xl md:text-7xl mb-4 text-[#B03EFF]">
          ‚è≥
        </div>
        <h3 class="text-xl sm:text-2xl font-bold text-[#F1F1F1] mb-3">
          Parsing your resume...
        </h3>
        <p class="text-base sm:text-lg text-[#A7A7A7]">
          Please wait while we extract information from your resume
        </p>
      </div>
      }
    </div>
  </div>
</section>
